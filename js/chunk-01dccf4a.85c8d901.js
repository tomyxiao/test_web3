(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-01dccf4a"],{"170b":function(e,t,s){"use strict";s.r(t);s("d9e2");var i=s("c24f"),o={name:"index",data:()=>({level:null,isLogin:!1,dialogSignUp:!1,dialogLogin:!1,isSubmit:!1,userInfo:{apikey:""},loginform:{email:"",password:""},signUpform:{firstName:"",lastName:"",email:"",password:"",agreeType:[]},signUpRules:{agreeType:[{type:"array",required:!0,message:"You must agree to the terms of service.",trigger:"change"}],email:[{required:!0,trigger:"blur",validator:(e,t,s)=>{if(!t)return s(new Error("Please enter your E-mail address."));""===t||/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/.test(t)?s():s(new Error("Please enter the correct E-mail address."))}}],password:[{required:!0,trigger:"blur",validator:(e,t,s)=>{if(!t)return s(new Error("Please enter password."));""===t||/^(?=.*[0-9\!@#\$%\^&\*])(?=.*[a-zA-Z]).{6,16}$/.test(t)?s():s(new Error("Please enter a password with 6-16 digits that cannot be pure numbers or letters."))}}]},activePath:""}),created(){this.getUserInfo(),"doc"==this.$route.name?this.activePath="/doc/Address":this.activePath=this.$route.path},methods:{handleSelect(e){"/doc/Address"===e&&"doc"==this.$route.name||this.$router.push({path:e})},openAccount(e){this.$route.params.type!=e&&this.$router.push({name:"settings",params:{type:e,id:this.userInfo.id,email:this.userInfo.email,firstName:this.userInfo.firstName,lastName:this.userInfo.lastName,apiKey:this.userInfo.apiKey}})},async getUserInfo(){let e=localStorage.getItem("id");if(null==e)return;const t=this.$loading({text:"loading..."});try{const{data:s,success:o}=await Object(i.a)({id:e});o?(localStorage.setItem("level",s.level),this.level=s.level,this.userInfo=s,this.isLogin=!0):(localStorage.clear(),this.level=null),setTimeout((()=>{t.close()}),200)}catch(e){setTimeout((()=>{t.close()}),200)}},logOut(){localStorage.clear(),this.isLogin=!1,this.level=null,"charts"!==this.$route.name?this.$router.push("/"):location.reload()},async loginSub(){this.isSubmit||(this.isSubmit=!0,this.$refs.loginform.validate((async e=>{if(!e)return this.isSubmit=!1,!1;{const e=this.$loading({text:"loading..."});try{const{data:t,success:s,message:o}=await Object(i.c)(this.loginform);s?(this.$message.success("login success"),this.dialogLogin=!1,this.userInfo=t,this.$refs.loginform.resetFields(),localStorage.setItem("token",t.token),localStorage.setItem("id",t.id),localStorage.setItem("level",t.level),this.isLogin=!0,this.level=t.level,"charts"==this.$route.name&&(this.$refs.charts.selectMenu(t.level,t.apiKey),this.$refs.charts.getfavoriteList())):this.$message.error(o),setTimeout((()=>{e.close()}),200)}catch(t){setTimeout((()=>{e.close()}),200)}this.isSubmit=!1}})))},async signUpSub(){this.isSubmit||(this.isSubmit=!0,this.$refs.signUpform.validate((async e=>{if(!e)return this.isSubmit=!1,!1;{const e=this.$loading({text:"loading..."});try{const{success:t,message:s}=await Object(i.d)(this.signUpform);t?(this.$refs.signUpform.resetFields(),this.$message.success("registration success"),this.dialogSignUp=!1):this.$message.error(s),setTimeout((()=>{e.close()}),200)}catch(t){setTimeout((()=>{e.close()}),200)}this.isSubmit=!1}})))}}},r=(s("5a44"),s("2877")),a=Object(r.a)(o,(function(){var e=this,t=e._self._c;return t("div",[t("el-container",[t("el-header",{attrs:{height:"60"}},[t("el-row",{attrs:{type:"flex"}},[t("el-col",{attrs:{span:4}},[t("h1",[t("router-link",{attrs:{to:"/"}},[e._v("Mars Analysis")])],1)]),t("el-col",[t("el-menu",{staticClass:"el-menu-header",attrs:{mode:"horizontal","default-active":e.activePath}},[t("el-menu-item",{attrs:{index:"/charts"},on:{click:function(t){return e.handleSelect("/charts")}}},[e._v("Charts")]),t("el-menu-item",{attrs:{index:"/pricing"},on:{click:function(t){return e.handleSelect("/pricing")}}},[e._v("Pricing")]),t("el-menu-item",{attrs:{index:"/docuks/Address"},on:{click:function(t){return e.handleSelect("/doc/Address")}}},[e._v("ApiDoc")])],1)],1),t("el-col",{attrs:{span:5}},[t("el-row",{attrs:{type:"flex",justify:"end",align:"middle"}},[e.isLogin?t("div",[t("el-dropdown",{attrs:{size:"mini"}},[t("el-button",{attrs:{type:"primary",size:"mini"}},[e._v(" "+e._s(e.userInfo.firstName)+" "+e._s(e.userInfo.lastName)),t("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.userInfo.level))]),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})],1),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[t("div",{on:{click:function(t){return e.openAccount("Account")}}},[e._v("Account")])]),t("el-dropdown-item",[t("div",{on:{click:function(t){return e.openAccount("API")}}},[e._v("API")])]),t("el-dropdown-item",[t("div",{on:{click:e.logOut}},[e._v("Log Out")])])],1)],1)],1):t("div",[t("el-button",{attrs:{plain:""},on:{click:function(t){e.dialogLogin=!0}}},[e._v("Log in")]),t("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.dialogSignUp=!0}}},[e._v("Sign up")])],1)])],1)],1)],1),t("div",{staticClass:"main-content"},[t("router-view",{ref:"charts",attrs:{userInfo:e.userInfo}})],1),t("el-dialog",{attrs:{title:"Sign Up",visible:e.dialogSignUp,width:"500px"},on:{"update:visible":function(t){e.dialogSignUp=t}}},[t("el-form",{ref:"signUpform",attrs:{model:e.signUpform,rules:e.signUpRules}},[t("el-form-item",{attrs:{label:"First Name",prop:"firstName",rules:[{required:!0,message:"Please enter your first name."}]}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.signUpform.firstName,callback:function(t){e.$set(e.signUpform,"firstName",t)},expression:"signUpform.firstName"}})],1),t("el-form-item",{attrs:{label:"Last Name",prop:"lastName",rules:[{required:!0,message:"Please enter your last name."}]}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.signUpform.lastName,callback:function(t){e.$set(e.signUpform,"lastName",t)},expression:"signUpform.lastName"}})],1),t("el-form-item",{attrs:{label:"Email",prop:"email"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.signUpform.email,callback:function(t){e.$set(e.signUpform,"email",t)},expression:"signUpform.email"}})],1),t("el-form-item",{attrs:{label:"password",prop:"password"}},[t("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.signUpform.password,callback:function(t){e.$set(e.signUpform,"password",t)},expression:"signUpform.password"}})],1),t("el-form-item",{attrs:{label:"",prop:"agreeType"}},[t("el-checkbox-group",{model:{value:e.signUpform.agreeType,callback:function(t){e.$set(e.signUpform,"agreeType",t)},expression:"signUpform.agreeType"}},[t("el-checkbox",{attrs:{label:"",name:"agreeType",checked:""}},[e._v("I agree to the Terms & Conditions, and consent to receiving on-chain market insights and updates in accordance with the Privacy Notice")])],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogSignUp=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.signUpSub}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"Login",visible:e.dialogLogin,width:"500px"},on:{"update:visible":function(t){e.dialogLogin=t}}},[t("el-form",{ref:"loginform",attrs:{model:e.loginform,rules:e.signUpRules}},[t("el-form-item",{attrs:{label:"email",prop:"email"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.loginform.email,callback:function(t){e.$set(e.loginform,"email",t)},expression:"loginform.email"}})],1),t("el-form-item",{attrs:{label:"password",prop:"password"}},[t("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.loginform.password,callback:function(t){e.$set(e.loginform,"password",t)},expression:"loginform.password"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogLogin=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.loginSub}},[e._v("确 定")])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=a.exports},"5a44":function(e,t,s){"use strict";s("669b")},"669b":function(e,t,s){},c24f:function(e,t,s){"use strict";s.d(t,"d",(function(){return o})),s.d(t,"c",(function(){return r})),s.d(t,"g",(function(){return a})),s.d(t,"f",(function(){return n})),s.d(t,"e",(function(){return l})),s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return u}));var i=s("d5db");const o=e=>i.a.post("/api/user/signup",e),r=e=>i.a.post("/api/user/login",e),a=(e,t)=>i.a.post("/api/user/"+t+"/update/password",e),n=e=>i.a.post("/api/user/"+e+"/update/api/key"),l=(e,t)=>i.a.post("/api/user/"+t+"/update",e),c=e=>i.a.get("/api/user/"+e.id,e),u=e=>i.a.get("/api/user/level/info",e)}}]);