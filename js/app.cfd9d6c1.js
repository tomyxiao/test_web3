!function(e){function t(t){for(var a,i,s=t[0],c=t[1],u=t[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);for(l&&l(t);p.length;)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,i=1;i<n.length;i++){var c=n[i];0!==r[c]&&(a=!1)}a&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},i={app:0},r={app:0},o=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[];i[e]?t.push(i[e]):0!==i[e]&&{"chunk-01dccf4a":1,"chunk-27f8e641":1,"chunk-53f8c27b":1,"chunk-5ab58378":1,"chunk-c060f5c4":1}[e]&&t.push(i[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-01dccf4a":"e9c1aa6f","chunk-27f8e641":"6c6b924d","chunk-53f8c27b":"f520f7fd","chunk-5ab58378":"c44eb7eb","chunk-c060f5c4":"a9d937c5"}[e]+".css",r=s.p+a,o=document.getElementsByTagName("link"),c=0;c<o.length;c++){var u=(l=o[c]).getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===a||u===r))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){var l;if((u=(l=d[c]).getAttribute("data-href"))===a||u===r)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var a=t&&t.target&&t.target.src||r,o=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=a,delete i[e],p.parentNode.removeChild(p),n(o)},p.href=r,document.getElementsByTagName("head")[0].appendChild(p)})).then((function(){i[e]=0})));var n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=r[e]=[t,a]}));t.push(n[2]=a);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=function(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-01dccf4a":"85c8d901","chunk-27f8e641":"6479256f","chunk-53f8c27b":"444b86aa","chunk-5ab58378":"cac6bf66","chunk-c060f5c4":"02c61a35"}[e]+".js"}(e);var u=new Error;o=function(t){c.onerror=c.onload=null,clearTimeout(d);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",u.name="ChunkLoadError",u.type=a,u.request=i,n[1](u)}r[e]=void 0}};var d=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(t)},s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw e};var c=window.webpackJsonp=window.webpackJsonp||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var l=u;o.push([0,"chunk-vendors"]),n()}({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},17:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);var a=n("2b0e"),i={name:"App"},r=(n("96b1"),n("2877")),o=Object(r.a)(i,(function(){var e=this._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)}),[],!1,null,null,null).exports,s=(n("caad"),n("8c4f")),c=n("d5db");a.default.use(s.a);const u=["/login"],d=[{path:"/",redirect:"/charts"},{path:"",name:"main",component:()=>n.e("chunk-01dccf4a").then(n.bind(null,"170b")),children:[{path:"charts",component:()=>n.e("chunk-5ab58378").then(n.bind(null,"e83a")),name:"charts"},{path:"settings/:type",component:()=>n.e("chunk-53f8c27b").then(n.bind(null,"3e1f")),name:"settings"},{path:"pricing",component:()=>n.e("chunk-c060f5c4").then(n.bind(null,"327a")),name:"pricing"},{path:"doc/:type",component:()=>n.e("chunk-27f8e641").then(n.bind(null,"8d54")),name:"doc"}]}],l=new s.a({mode:"history",scrollBehavior:(e,t,n)=>n||{x:0,y:0},routes:d});l.beforeEach(((e,t,n)=>{c.b.length>0&&c.b.forEach((e=>{e.cancel("Canceled")}));localStorage.getItem("token")||u.includes(e.path),n()}));var p=l,h=n("2f62"),f=n("5c96"),y=n.n(f);a.default.use(h.a);var m=new h.a.Store({state:{address:""},mutations:{setAddress(e,t){e.address=t,localStorage.setItem("address",t)}},actions:{async ethereumConnect({commit:e}){if(window.ethereum){e("setAddress","");try{4!==window.ethereum.networkVersion&&await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:window.web3.utils.numberToHex(4)}]})}catch(e){if(4902===e.code)try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:window.web3.utils.numberToHex(4),chainName:"Rinkeby 测试网络",rpcUrls:["https://rinkeby.infura.io/v3/"]}]})}catch(e){}else if(4001===e.code)return}try{let t;t="function"==typeof window.ethereum.enable?await window.ethereum.enable():await window.ethereum.request({method:"eth_requestAccounts"}),t&&t[0]?await e("setAddress",t[0]):f.Message.error("Failed to connect to wallet")}catch(e){e.code,f.Message.error("Failed to connect to wallet")}}},async onAccountsChanged({commit:e}){window.ethereum&&window.ethereum.on("accountsChanged",(async t=>{t&&t[0]?await e("setAddress",t[0]):(e("setAddress",""),f.Message.error("Failed to connect to wallet"))}))},async onNetworkChanged({dispatch:e}){window.ethereum&&window.ethereum.on("chainChanged",(t=>{t&&e("ethereumConnect")}))}}}),b=(n("0fae"),n("b2d6")),w=n.n(b),g=n("cd59"),T=n.n(g);const v="1"===Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_SERVER_ID,k=v?"https://etherscan.io":"https://ropsten.etherscan.io",x=v?"0x6f00dec4dE34dae9D88c12717fceaB33F45525fb":"0xc483ed68B5d8f3D910547e4e9DAA981392eE7D3f";void 0!==window.ethereum?window.web3=new T.a(window.ethereum):window.web3=new T.a(new T.a.providers.HttpProvider(k));const S=window.web3,C=new window.web3.eth.Contract([{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"_jurisdiction",type:"string"},{indexed:!1,internalType:"address",name:"_payAddr",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_time",type:"uint256"}],name:"PayLog",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"WITHDRAW",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_jurisdiction",type:"string"}],name:"feePay",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawDeposit",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],x);var A={install(e){Object.defineProperty(e.prototype,"$web3",{get:()=>S}),Object.defineProperty(e.prototype,"$PAYContract",{get:()=>C})}};n("d9e2");n("dca7"),n("18af");const O={data:()=>({startBlock:0,pendingData:{},pendingTx:null,stateTimer:null,state:0}),watch:{"$store.state.address":{immediate:!0,handler(e){e&&"function"==typeof this.watchAddress&&this.watchAddress()}}},beforeDestroy(){this.clearStateTimer()},methods:{clearStateTimer(){this.stateTimer&&(clearTimeout(this.stateTimer),this.stateTimer=null)},checkPending(e){const t=localStorage.getItem("pendingTxs");if(!t)return;this.pendingData=JSON.parse(t);const n=Object.entries(this.pendingData).filter((([t,n])=>t&&e.includes(n.type)&&n.tx.from.toLowerCase()===this.$store.state.address.toLowerCase()));if(n.length<=0)return;const a=n[0][1];a&&e.includes(a.type)&&this.startCheckState(a.tx.hash,a.type)},startCheckState(e,t){this.waitGetReceipt(e,t)},waitGetReceipt(e,t){this.clearStateTimer(),this.stateTimer=setTimeout((()=>{this.reqHashState(e,t)}),3e3)},onReceiptOK(e,t){this.clearStateTimer(),"function"==typeof this.onAuthOK?this.onAuthOK(t):"function"==typeof this.onSendOK&&this.onSendOK(e,t)},onReceiptFail(e,t){this.assetSwap=!1,this.clearStateTimer(),"function"==typeof this.onAuthFail?this.onAuthFail(e,t):"function"==typeof this.onSendFail&&this.onSendFail(e,t)},async reqHashState(e,t){if(!this.stateTimer||!e)return;const n=this.findTxInPending(e);try{const a=await this.$web3.eth.getTransaction(e);if(a)if(this.addToPending(a,t),a.blockHash){const n=await this.$web3.eth.getTransactionReceipt(e);this.onReceiptOK(n,t),this.removeFromPending(a)}else this.waitGetReceipt(e,t);else if(n&&!a){const e=await async function(e,t,n,a){if(await e.eth.getTransactionCount(n.from,"latest")<=n.nonce)return null;let i,r=await e.eth.getBlockNumber(),o=t;for(;o<=r;){const t=Math.floor((o+r)/2),a=await e.eth.getTransactionCount(n.from,t)-1;if(a<n.nonce)o=t+1;else if(a>=n.nonce){if(await e.eth.getTransactionCount(n.from,t-1)-1<n.nonce){i=t;break}r=t-1}}if(!i)throw new Error("Could not find replacement transaction. It may be due to a chain reorg.");const s=(await e.eth.getBlock(i,!0)).transactions.find((e=>e.from.toLowerCase()===n.from.toLowerCase()&&e.nonce===n.nonce));if(!s)throw new Error("Error happened while searching replacement transaction.");if(s.to.toLowerCase()!==n.to.toLowerCase()){const e=`Transaction was dropped and replaced by '${s.hash}'`;throw new Error(e)}const c=await e.eth.getTransactionReceipt(s.hash);if(!c.status){const e=`Transaction was dropped and replaced by a failing transaction: '${s.hash}'`;throw new Error(e)}if(a){const t=new e.eth.Contract(JSON.parse(a.abi),n.to),i=(await t.getPastEvents(a.name,{fromBlock:c.blockNumber,toBlock:c.blockNumber})).find((e=>e.transactionHash===s.hash));if(!i||!a.validate(i)){const e=`Transaction was dropped and replaced by '${s.hash}'\n        with unexpected event: '${JSON.stringify(a)}'`;throw new Error(e)}}return c}(this.$web3,n.startBlock,n.tx);this.onReceiptOK(e,t),this.removeFromPending(n.tx)}else n&&(this.onReceiptFail(new Error(e),t),this.removeFromPending(n.tx))}catch(e){this.onReceiptFail(e,t),n&&n.tx&&this.removeFromPending(n.tx)}},async addToPending(e,t){if(!e)return;const n=e.nonce,a=await this.$web3.eth.getBlockNumber();this.pendingData[n]={type:t,startBlock:a,tx:e},localStorage.setItem("pendingTxs",JSON.stringify(this.pendingData))},removeFromPending(e){if(!e)return;const{nonce:t}=e;(t in this.pendingData||String(t)in this.pendingData)&&delete this.pendingData[String(t)],localStorage.setItem("pendingTxs",JSON.stringify(this.pendingData))},removeByTxHash(e){if(e){for(let[t,n]of Object.entries(this.pendingData))n.tx&&n.tx.hash&&n.tx.hash.toLowerCase()===e.toLowerCase()&&delete this.pendingData[t];localStorage.setItem("pendingTxs",JSON.stringify(this.pendingData))}},findTxInPending(e){if(!e)return;let t=null;for(let n of Object.keys(this.pendingData))e.toLowerCase()===this.pendingData[n].tx.hash.toLowerCase()&&(t=this.pendingData[n]);return t}}};var R={install(e){e.mixin(O)}};n("aede");a.default.config.productionTip=!1,a.default.use(y.a,{locale:w.a}),a.default.use(A),a.default.use(R),a.default.$httpRequestList=[],new a.default({router:p,store:m,render:e=>e(o)}).$mount("#app")},6:function(e,t){},7:function(e,t){},8:function(e,t){},9:function(e,t){},"96b1":function(e,t,n){"use strict";n("cc51")},aede:function(e,t,n){},cc51:function(e,t,n){},d5db:function(e,t,n){"use strict";n.d(t,"b",(function(){return l}));var a=n("bc3a"),i=n.n(a),r=n("2b0e"),o=n("4328"),s=n.n(o),c=n("5c96");const u=i.a.create({baseURL:"",timeout:1e5,withCredentials:!0}),d=["/login"],l=[],{CancelToken:p}=i.a,h=({config:e})=>{const t=`${e.url}&${e.method}&${s.a.stringify(e.data)}`;l.forEach(((n,a)=>{n.url===t&&(n.cancel(`During the network request, please do not repeat the operation!${e.url}`),l.splice(a,1))}))};function f(){let e=function(){let e=new XMLHttpRequest;return e.open("GET","/",!1),e.send(),Date.parse(e.getResponseHeader("Date"))}();return e=e.toString(),function(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n,a,i,r,o,s="",c="",u="",d=0;do{n=e.charCodeAt(d++),a=e.charCodeAt(d++),c=e.charCodeAt(d++),i=n>>2,r=(3&n)<<4|a>>4,o=(15&a)<<2|c>>6,u=63&c,isNaN(a)?o=u=64:isNaN(c)&&(u=64),s=s+t.charAt(i)+t.charAt(r)+t.charAt(o)+t.charAt(u),n=a=c="",i=r=o=u=""}while(d<e.length);return s}(e).toString()}const y=({config:e}={})=>{(({config:e})=>{e.headers.timestamp=Date.now(),e.headers.dappSec=f();const t=localStorage.getItem("token");t&&(e.headers.token=t),e.headers["accept-with"]="zh-ts",e.headers["x-client-req"]="dapp",e.headers["content-type"]="application/json"})({config:e}),h({config:e}),(({config:e})=>{const t=d.some((t=>e.url.match(t)));if(t)return;const n=`${e.url}&${e.method}&${s.a.stringify(e.data)}`;e.cancelToken=new p((e=>{l.some((e=>e.url===n))||l.push({url:n,cancel:e})}))})({config:e})};u.interceptors.request.use((e=>(navigator.onLine||setTimeout((()=>{Object(c.Message)("The current network is not good")}),1e3),y({config:e}),e.cancelToken=new i.a.CancelToken((function(e){r.default.$httpRequestList.push(e)})),e)),(e=>{Object(c.Message)("Error in request"),Promise.reject(e)})),u.interceptors.response.use((async e=>{const{status:t,data:n,config:a}=e;return(({config:e}={})=>{h({config:e})})({config:a,data:n}),1!==t&&200!==t?Promise.reject(e):(({status:e,data:t}={})=>200===e?(5001===t.code&&(localStorage.removeItem("token"),c.Message.error("Login invalid")),Promise.resolve(t)):(Object(c.Message)(t.msg||"operation failed"),Promise.reject(t)))({status:t,data:n,config:a})}),(e=>Promise.reject(e)));t.a=u}});